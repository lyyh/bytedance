## 核心原理
1. node server 接收客户端请求,得到当前的req url path,然后在已有的路由表内查找到对应的组件
2. 同时拿到需要请求的数据，将数据作为 props,context或者store 形式传入组件
3. 基于 react 内置的服务端渲染api renderToString() or renderToNodeStream() 把组件渲染为 html字符串或者 stream 流,
4. 在把最终的 html 进行输出前需要将数据注入到浏览器端(注水)，
5. server 输出(response)后浏览器端可以得到数据(脱水)
6. 浏览器开始进行渲染和节点对比，然后执行组件的componentDidMount 完成组件内事件绑定和一些交互，
7. 浏览器重用了服务端输出的 html 节点，整个流程结束。

## 渲染同构防止重新渲染
刚刚我们实现了双端的数据预取同构，但是数据也仅仅是服务端有，浏览器端是没有这个数据，当客户端进行首次组件渲染的时候没有初始化的数据，渲染出的节点肯定和服务端直出的节点不同，导致组件重新渲染。

## 数据注水
在服务端将预取的数据注入到浏览器，使浏览器端可以访问到，客户端进行渲染前将数据传入对应的组件即可，这样就保证了props的一致。

## 数据脱水
数据已经注入到了浏览器端，客户端组件渲染前先拿到数据，并且传入数据就可以了