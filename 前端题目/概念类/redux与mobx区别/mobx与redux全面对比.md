## 为什么需要Redux和Mobx
当项目复杂度上升的时候，逐渐演变成多个组件层级上相互修改状态的应用，这时候React自身的状态管理就会变得非常笨拙。一般的解决方案是将一些子组件的状态提升至公共的父组件中做统一管理。但这样代码复杂度也会随之上升，因为很多数据中间层组件只是起到了传递state的作用，后续想迁移一个state成本就会非常大，并且当state变化的时候，你根本分不清楚是由哪个组件触发的。

Redux和Mobx就是为了解决这样的问题诞生的。
- Redux将应用的state放在同一个store内维护，当需要修改state的时候，dispatch 一个 action 给 reducer，reducer 计算出新的state后，再将 state 发布给事件订阅的组件。（发布订阅模式）
- Redux使用发布订阅机制解决数据同步的问题，

- Mobx是做对象响应式，将数据和组件进行绑定，但数据改变时对绑定的组件做更新，这样能起到一个局部更新的效果。在一些简单场景下，Mobx更快，开发效率更高。

## Redux
1. 函数式编程
2. 无副作用，可时间回溯，随之带来可以预测、错误定位能力
3. 引入中间件，为了解决异步带来的副作用
4. 时间回溯的代价很大，因为每次都要重新引用，除非增加代码复杂度，或使用immutable

## Redux流程
应用的state放在同一个store内维护，当需要修改state的时候，dispatch 一个 action 给 reducer，reducer 计算出新的state后，再将 state 发布给事件订阅的组件。

## Mobx
1. 面向对象式编程
2. 没有时间回溯能力，因为数据只有一份引用

## 数据更新
1. 数据流动很自然，任何 dispatch 都会触发广播，需要依据对象引用是否发生变化来更新粒度。
2. 只有用到的数据才会引发绑定，局部精确更新，免去了粒度控制的烦恼

## Redux和Mobx如何优化
1. Redux 减少 connect 数量，用一个父容器注入store。

## 从原理实现上说
- Redux 的 reducer 因为每次都返回一个新的引用，需要配合脏检查的工具，来减少多余的组件渲染。
- Mobx 一个运行时决定最小订阅子集。

## 如何选择
1. 看数据流的复杂度，简单的复杂度，mobx 更加清晰，便于维护。数据流极其复杂的场景，建议使用Redux，通过中间件减缓巨大业务复杂度。

## 需要避免的点
1. Redux 过度订阅你不需要的数据，忘记订阅了你不需要的数据，订阅了不再需要的数据。过度订阅会造成组件没有意义的重复渲染。


## mobx-react 和 react-redux
使用Redux和React应用连接时，需要使用react-redux提供的Provider和connect：

Provider：负责将Store注入React应用；
connect：负责将store state注入容器组件，并选择特定状态作为容器组件props传递；
对于Mobx而言，同样需要两个步骤：

Provider：使用mobx-react提供的Provider将所有stores注入应用；
使用inject将特定store注入某组件，store可以传递状态或action；然后使用observer保证组件能响应store中的可观察对象（observable）变更，即store更新，组件视图响应式更新。

## 最终的选择
- 没有绝对的对比，我们应该选择什么抛弃什么，我们应该关注它们解决什么问题，它们解决问题的关注点是什么。或者说实现方式是什么，它们的优缺点还有什么，哪一个更适合当前项目，以及项目未来发展。
- 比如Redux流程更复杂，但熟悉流程后就更能把握它的一些基础／核心理念，使用起来可能更有心得及感悟；而Mobx简单化，把大部分东西隐藏起来，如果不去特别研究就不能接触到它的核心／基本思想，也许使得开发者一直停留在使用层次。
